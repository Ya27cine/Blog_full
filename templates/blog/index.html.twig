{% extends "base.html.twig" %} 

{% block heeader %}
     <!-- Page Header-->
        <header class="masthead" style="background-image: url('assets/img/home-bg.jpg')">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <div class="site-heading">
                            <h1>Clean Blog</h1>
                            <span class="subheading">A Blog Theme by Start PROSTAM</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
{% endblock %}


{% block body %}
    
          <!-- Main Content-->
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
            <h2> List Posts </h2>
                <div class="col-md-10 col-lg-8 col-xl-7">
                        {% for post in posts %}
                            <!-- Post preview-->
                                <div class="post-preview">
                                    <a href="post.html">
                                        <h2 class="post-title">{{ post.title}}</h2>
                                    </a>
                                        <h5 class="post-subtitle"> {{ post.content | slice(0, 77) }}...</h5>
                                    <p class="post-meta">
                                        Posted by
                                        <a href="#!">Start Prostam</a>
                                        on {{ post.published | date('d M  Y') }}
                                    </p>
                                </div>
                                <!-- Divider-->
                                <hr class="my-4" />
                        {% endfor %}
                    
                    <div class="d-flex justify-content-end mb-4"><a class="btn btn-primary text-uppercase" href="#!">Older Posts â†’</a></div>
                </div>
            </div>
        </div>
        
   <a id="loadstudent" href="#student">Load student information</a>  
   </br> 
   </br>  
   
   <table class = "table">  
      <tbody id="student"></tbody>  
   </table>   

<script language = "javascript" 
      src = "https://code.jquery.com/jquery-2.2.4.min.js"></script><script language = "javascript">  

      $(document).ready(function(){   
         $("#loadstudent").on("click", function(event){  
            $.ajax({  
               url:        '/prostam',  
               type:       'POST',   
               dataType:   'json',  
               async:      true,  
               
               success: function(data, status) {  
                  var e = $('<tr><th>Name</th><th>Address</th></tr>');  
                  $('#student').html('');  
                  $('#student').append(e);  
                  
                  for(i = 0; i < data.length; i++) {  
                     student = data[i];  
                     var e = $('<tr><td id = "name"></td><td id = "address"></td></tr>');
                     
                     $('#name', e).html(student['title']);  
                     $('#address', e).html(student['content']);  
                     $('#student').append(e);  
                  }  
               },  
               error : function(xhr, textStatus, errorThrown) {  
                  alert('Ajax request failed.');  
               }  
            });  
         });  
      });  
   </script> 
{% endblock %}